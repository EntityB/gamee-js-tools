{"version":3,"file":"gamee-tools.js","sources":["webpack:///webpack/bootstrap 2f4f15ed26b945ae5eb0","webpack:///./src/gameeWeb.js","webpack:///./src/tools.js","webpack:///./src/index.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2f4f15ed26b945ae5eb0","export var gameeWeb = (function () {\r\n\r\n    var hashCode = function (str) {\r\n        var hash = 0, i, chr;\r\n        if (str.length === 0) return hash;\r\n        for (i = 0; i < str.length; i++) {\r\n            chr = str.charCodeAt(i);\r\n            hash = ((hash << 5) - hash) + chr;\r\n            hash |= 0; // Convert to 32bit integer\r\n        }\r\n        return hash;\r\n    };\r\n\r\n    //select the iframe containing the message receiver remote script\r\n    var remoteframe;\r\n    var gameId;\r\n    var gameScoreEl;\r\n    var ghostScoreEl;\r\n    var ctrlWrapperEl = document.getElementById(\"controlls-wrapper\");\r\n    var ctrl = ctrlWrapperEl.innerHTML;\r\n\r\n    function sendMessage() {\r\n\r\n        var method = document.getElementById(\"requestmethod\").value;\r\n        var data = document.getElementById(\"requestdata\").value;\r\n\r\n        // data = JSON.stringify(data);\r\n\r\n        postMessageToIframe({\r\n            request: {\r\n                method: method,\r\n                messageId: 0,\r\n                data: data\r\n            }\r\n        });\r\n    }\r\n\r\n    function postMessageToIframe(content) {\r\n        remoteframe.contentWindow.postMessage(content, \"*\");\r\n    }\r\n\r\n    function command(type) {\r\n        switch (type) {\r\n            case 'start':\r\n                postMessageToIframe({\r\n                    request: {\r\n                        method: type,\r\n                        messageId: 0,\r\n                        data: {\r\n                            data: {}\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            case 'startReplay':\r\n                postMessageToIframe({\r\n                    request: {\r\n                        method: 'start',\r\n                        messageId: 0,\r\n                        data: {\r\n                            replay: true\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            case 'startGhost':\r\n                postMessageToIframe({\r\n                    request: {\r\n                        method: 'start',\r\n                        messageId: 0,\r\n                        data: {\r\n                            ghostMode: true\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            default:\r\n                postMessageToIframe({\r\n                    request: {\r\n                        method: type,\r\n                        messageId: 0\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n    window.addEventListener('message', function (ev) {\r\n        var data;\r\n        try {\r\n            data = ev.data;\r\n        } catch (err) {\r\n            return;\r\n        }\r\n\r\n        if (data.request && typeof Array.isArray(data.request)) {\r\n            postMessageRequest(data.request);\r\n        } else if (data.response && typeof Array.isArray(data.response)) {\r\n            postMessageResponse(data.response);\r\n        }\r\n    });\r\n\r\n    var avatar = \"data:image/gif;base64,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\";\r\n    function postMessageRequest(data) {\r\n        var id = data.messageId,\r\n            method = data.method,\r\n            rData = data.data;\r\n\r\n        switch (method) {\r\n            case 'init':\r\n            gameId = hashCode(remoteframe.src);\r\n                var responseData = {\r\n                    saveState: null,\r\n                    replayData: null,\r\n                    sound: false\r\n                };\r\n                if (rData.capabilities) {\r\n                    if (rData.capabilities.saveState) {\r\n                        if (localStorage.getItem(\"saveState-\" + gameId) !== null)\r\n                            responseData.saveState = localStorage.getItem(\"saveState-\" + gameId);\r\n                    }\r\n                    if (rData.capabilities.replay) {\r\n                        if (localStorage.getItem(\"replayData-\" + gameId) !== null) {\r\n                            responseData.replayData = JSON.parse(localStorage.getItem(\"replayData-\" + gameId));\r\n                            prepareReplayButton();\r\n                        }\r\n                    }\r\n                    if (rData.capabilities.ghostMode) {\r\n                        if (localStorage.getItem(\"replayData-\" + gameId) !== null) {\r\n                            responseData.replayData = JSON.parse(localStorage.getItem(\"replayData-\" + gameId));\r\n                            prepareGhostButton();\r\n                        }\r\n                    }\r\n                }\r\n                response(id, responseData);\r\n                break;\r\n            case 'gameReady':\r\n                // response(id);\r\n                var startButton = document.createElement(\"button\");\r\n                startButton.addEventListener(\"click\", function () {\r\n                    gameScoreEl.value = 0;\r\n                    command('start');\r\n                });\r\n                startButton.innerHTML = \"Start\";\r\n                document.getElementById(\"controlls\").appendChild(startButton);\r\n                break;\r\n            case 'updateScore':\r\n                var newScore = parseInt(rData.score);\r\n                var scoreEl = rData.ghostSign ? ghostScoreEl : gameScoreEl;\r\n                if (newScore > scoreEl.value)\r\n                    scoreEl.value = newScore;\r\n                // response(id);\r\n                break;\r\n            case 'gameOver':\r\n                if (rData.replayData) {\r\n                    localStorage.setItem(\"replayData-\" + gameId, JSON.stringify(rData.replayData));\r\n                }\r\n                // response(id);\r\n                break;\r\n            case 'saveState':\r\n                localStorage.setItem(\"saveState-\" + gameId, rData.state);\r\n                // response(id);\r\n                break;\r\n            case 'requestSocial':\r\n                var friends = [];\r\n                friends.push({ name: \"Entita\", avatar: avatar, highScore: 10000 });\r\n                friends.push({ name: \"Lukas\", avatar: \"https://scontent.xx.fbcdn.net/v/t1.0-1/p720x720/10407458_10205512546521851_83732587093950795_n.jpg?oh\\\\u003d65577f4c957ab0055d09c2379f3eeeb2\\\\u0026amp;amp;amp;amp;amp;oe\\\\u003d595C02D2\", highScore: 15000 });\r\n                friends.push({ name: \"Mirek\", avatar: \"https://s3.amazonaws.com/gamee-users-devel/photo--494961467.png\", highScore: 20000 });\r\n                var responseData = {\r\n                    friends: friends\r\n                };\r\n                response(id, responseData);\r\n                break;\r\n            default:\r\n                throw \"Unknown method call\";\r\n        }\r\n    }\r\n\r\n    function postMessageResponse(data) {\r\n        // console.log(\"callback: \" + data);\r\n    }\r\n\r\n    function response(id, data) {\r\n        var data = {\r\n            response: {\r\n                messageId: id,\r\n                data: data\r\n            }\r\n        };\r\n\r\n        postMessageToIframe(data);\r\n    }\r\n\r\n    function prepareReplayButton() {\r\n        var replayEl = document.createElement(\"button\");\r\n        replayEl.innerHTML = \"Replay\";\r\n        replayEl.addEventListener(\"click\", function () {\r\n            gameScoreEl.value = 0;\r\n            command('startReplay');\r\n        });\r\n\r\n        document.getElementById(\"controlls\").appendChild(replayEl);\r\n    }\r\n\r\n    function prepareGhostButton() {\r\n        var ghostEl = document.createElement(\"button\");\r\n        ghostEl.innerHTML = \"Ghost mode\";\r\n        ghostEl.addEventListener(\"click\", function () {\r\n            gameScoreEl.value = 0;\r\n            command('startGhost');\r\n        });\r\n\r\n        ghostScoreEl = document.createElement(\"input\");\r\n        ghostScoreEl.disabled = true;\r\n\r\n        var label = document.createElement(\"label\");\r\n        label.innerHTML = \"Ghost score\";\r\n        document.getElementById(\"controlls\").appendChild(ghostEl);\r\n        document.getElementById(\"controlls\").appendChild(label);\r\n        document.getElementById(\"controlls\").appendChild(ghostScoreEl);\r\n    }\r\n\r\n    function initalizeControlls() {\r\n        ctrlWrapperEl.innerHTML = \"\";\r\n        ctrlWrapperEl.innerHTML = ctrl;\r\n\r\n        gameScoreEl = document.getElementById(\"game-score\");\r\n    }\r\n\r\n    return {\r\n        init: function (iframe) {\r\n            remoteframe = iframe;\r\n            initalizeControlls();\r\n        },\r\n        command: command,\r\n        sendMessage: sendMessage\r\n    }\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/gameeWeb.js\n// module id = 0\n// module chunks = 0","(function () {\r\n    var oldHash;\r\n    var pages = document.querySelectorAll(\".main\");\r\n\r\n    window.addEventListener(\"hashchange\", linkRedirect, false);\r\n\r\n    function linkRedirect() {\r\n\r\n        pages.forEach(function (page) {\r\n            page.style.display = \"none\";\r\n        });\r\n\r\n        var pageToShowId = window.location.hash.slice(1) + \"-page\";\r\n        var pageToShow = document.getElementById(pageToShowId) || document.getElementById(\"dashboard-page\");\r\n        pageToShow.style.display = \"block\";\r\n    }\r\n\r\n    linkRedirect();\r\n})();\r\n\r\n$('#iframe-url-sub').on('click', function () {\r\n    var url = $('#iframe-url').val();\r\n    setProjectPreview(\"Remote project\", url);\r\n    window.location.hash = \"#project\";\r\n});\r\n\r\n\r\nexport function setProjectPreview(projectName, url) {\r\n    prepareIframeForGamePreview(projectName, url);\r\n}\r\n\r\n\r\nexport function prepareIframeForGamePreview(projectName, url) {\r\n    var link = \"/projects/\" + projectName;\r\n    if (url)\r\n        link = url;\r\n\r\n    var wrapper = document.getElementById(\"game-wrapper\");\r\n    wrapper.innerHTML = \"\";\r\n\r\n    var iframe = document.createElement(\"iframe\");\r\n\r\n    gameeWeb.init(iframe);\r\n\r\n    iframe.src = link;\r\n    iframe.frameBorder = 0;\r\n    iframe.width = 640;\r\n    iframe.height = 640;\r\n    wrapper.appendChild(iframe);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/tools.js\n// module id = 1\n// module chunks = 0","import {gameeWeb} from './gameeWeb.js';\r\nimport {tools} from './tools.js';\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 2\n// module chunks = 0"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;A;;;;;AChEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC5OA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACjDA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}